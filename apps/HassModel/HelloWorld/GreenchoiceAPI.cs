using Microsoft.Extensions.Configuration;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Diagnostics;
using System.Diagnostics.Contracts;
using System.IO;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Net.Http.Json;
using System.Text;
using System.Text.Json;
using System.Threading.Tasks;
using System.Xml.Linq;

namespace HomeAssistantNetDaemon.apps.HassModel.HelloWorld
{
   
    public class GreenchoiceAPI
    {
        private readonly IConfiguration _cfg;
        CookieContainer _cookies = new CookieContainer();
        private HttpClientHandler _httpHandler;
        HttpClient _client = new HttpClient();

        public GreenchoiceAPI(IConfiguration cfg)
        {
            _cfg = cfg;
            _httpHandler = new HttpClientHandler() {CookieContainer = _cookies};
            _httpHandler.AllowAutoRedirect = false;
            _client = new HttpClient(_httpHandler);
        }

        private const string BaseUrl = "https://mijn.greenchoice.nl";

        string HtmlGetInputValue(string pageContent, string inputName)
        {
            var Start = pageContent.IndexOf($"name=\"{inputName}\"");
            var ValueStart = pageContent.IndexOf("value=\"", Start) + 7;
            var ValueEnd = pageContent.IndexOf("\" />", ValueStart);

            return pageContent.Substring(ValueStart, ValueEnd - ValueStart);
        }

        string HtmlGetInputValueSQuote(string pageContent, string inputName)
        {
            var Start = pageContent.IndexOf($"name='{inputName}'");
            var ValueStart = pageContent.IndexOf("value='", Start) + 7;
            var ValueEnd = pageContent.IndexOf("' />", ValueStart);

            return pageContent.Substring(ValueStart, ValueEnd - ValueStart);
        }

        async Task LogIn()
        {
            var resultLoginPage = await _client.GetAsync(new Uri(BaseUrl));

            if (resultLoginPage.StatusCode == HttpStatusCode.OK)
            {
                return; // Already logged in
            }
            // Login gets redirected, and URL contains the returnUrl that we need.
            // Also body contains the __RequestVerificationToken that we need to extract from the login form

            while (resultLoginPage.StatusCode == HttpStatusCode.Found)
            {
                resultLoginPage = await _client.GetAsync(resultLoginPage.Headers.Location);
            }



            var content = await resultLoginPage.Content.ReadAsStringAsync();

            var returnUrl = HtmlGetInputValue(content, "ReturnUrl");
            var RequestVeriToken = HtmlGetInputValue(content, "__RequestVerificationToken");

            // https://sso.greenchoice.nl/Account/Login?ReturnUrl=

            _client.DefaultRequestHeaders.Add("Origin", "null");
            _client.DefaultRequestHeaders.Add("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
            _client.DefaultRequestHeaders.Add("Pragma", "no-cache");
            _client.DefaultRequestHeaders.Add("Sec-Fetch-Dest", "document");
            _client.DefaultRequestHeaders.Add("Sec-Fetch-Mode", "navigate");
            _client.DefaultRequestHeaders.Add("Sec-Fetch-Site", "same-origin");
            _client.DefaultRequestHeaders.Add("Sec-Fetch-User", "?1");
            _client.DefaultRequestHeaders.Add("TB", "trailers");

            var loginResult = await _client.PostAsync(resultLoginPage.RequestMessage.RequestUri, new FormUrlEncodedContent(new[]
            {
                new KeyValuePair<string, string>("ReturnUrl", returnUrl),
                new KeyValuePair<string, string>("Username", _cfg["Greenchoice:Username"]),
                new KeyValuePair<string, string>("Password", _cfg["Greenchoice:Password"]),
                new KeyValuePair<string, string>("RememberLogin", "true"),
                new KeyValuePair<string, string>("__RequestVerificationToken", RequestVeriToken)
            }));

            _client.DefaultRequestHeaders.Clear();


            while (loginResult.StatusCode == HttpStatusCode.Found)
            {
                var newTarget = new Uri("https://sso.greenchoice.nl/" + loginResult.Headers.Location.OriginalString.Replace("&amp;", "&"));
                loginResult = await _client.GetAsync(newTarget);
            }
            
            // The post will 302 redirect us to the ReturnUrl and pass parameters in the URL

            // Exchange oidc parameters for login cookie
            content = await loginResult.Content.ReadAsStringAsync();


            // Extract from query string
            var code = HtmlGetInputValueSQuote(content, "code");
            var scope = HtmlGetInputValueSQuote(content, "scope");
            var state = HtmlGetInputValueSQuote(content, "state");
            var session_state = HtmlGetInputValueSQuote(content, "session_state");


            var oidcResult = await _client.PostAsync(new Uri($"{BaseUrl}/signin-oidc"), new FormUrlEncodedContent(new[]
            {
                new KeyValuePair<string, string>("code", code),
                new KeyValuePair<string, string>("scope", scope),
                new KeyValuePair<string, string>("state", state),
                new KeyValuePair<string, string>("session_state", session_state),
            }));

            // This will have set the cookies we needed
        }

        public struct GreenchoiceConsumptionValue
        {
            public float consumptionHigh { get; set; }
            public float consumptionLow { get; set; }
            public float consumptionTotal { get; set; }
            public float costsHigh { get; set; }
            public float costsLow { get; set; }
            public float costsTotal { get; set; }
            public float costsFixed { get; set; }
            public string status { get; set; }
        }

        public struct GreenchoiceConsumptionEntry
        {
            public string productType { get; set; }
            public string unitType { get; set; }
            public Dictionary<DateTimeOffset, GreenchoiceConsumptionValue> values { get; set; }
            public GreenchoiceConsumptionValue total { get; set; }
        }

        public struct GreenchoiceConsumptionData
        {
            public string interval { get; set; }
            public DateTimeOffset start { get; set; }
            public DateTimeOffset end { get; set; }
            public List<GreenchoiceConsumptionEntry> entries { get; set; }
        }

        private async Task<string> JsonGet(Uri fetchUrl)
        {
            var dat = await _client.GetAsync(fetchUrl);

            if (dat.StatusCode != HttpStatusCode.OK)
            {
                // Login and retry
                await LogIn();
                dat = await _client.GetAsync(fetchUrl);
            
                if (dat.StatusCode != HttpStatusCode.OK)
                    throw new Exception($"Fetch failure {dat.StatusCode} {await dat.Content.ReadAsStringAsync()}");
            }

            return await dat.Content.ReadAsStringAsync();
        }

        public async Task<GreenchoiceConsumptionData> Fetch(DateTime start, DateTime end)
        {
            var data = await JsonGet(new Uri($"https://mijn.greenchoice.nl/api/consumption?interval=hour&start={start:yyyy-MM-dd}&end={end:yyyy-MM-dd}"));
            //string data = "{\"interval\":\"hour\",\"start\":\"2024-03-06T00:00:00Z\",\"end\":\"2024-03-07T00:00:00Z\",\"entries\":[{\"productType\":\"electricity\",\"unitType\":\"kWh\",\"values\":{\"2024-03-06T00:00:00+01:00\":{\"consumptionHigh\":0.03,\"consumptionLow\":0.0,\"consumptionTotal\":0.03,\"costsHigh\":0.011102355,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":-0.001085975,\"status\":\"measured\"},\"2024-03-06T01:00:00+01:00\":{\"consumptionHigh\":0.051,\"consumptionLow\":0.0,\"consumptionTotal\":0.051,\"costsHigh\":0.0188740035,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0066856735,\"status\":\"measured\"},\"2024-03-06T02:00:00+01:00\":{\"consumptionHigh\":0.052,\"consumptionLow\":0.0,\"consumptionTotal\":0.052,\"costsHigh\":0.019244082,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.007055752,\"status\":\"measured\"},\"2024-03-06T03:00:00+01:00\":{\"consumptionHigh\":0.048,\"consumptionLow\":0.0,\"consumptionTotal\":0.048,\"costsHigh\":0.017763768,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.005575438,\"status\":\"measured\"},\"2024-03-06T04:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0052053595,\"status\":\"measured\"},\"2024-03-06T05:00:00+01:00\":{\"consumptionHigh\":0.048,\"consumptionLow\":0.0,\"consumptionTotal\":0.048,\"costsHigh\":0.017763768,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.005575438,\"status\":\"measured\"},\"2024-03-06T06:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0052053595,\"status\":\"measured\"},\"2024-03-06T07:00:00+01:00\":{\"consumptionHigh\":0.054,\"consumptionLow\":0.0,\"consumptionTotal\":0.054,\"costsHigh\":0.019984239,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.007795909,\"status\":\"measured\"},\"2024-03-06T08:00:00+01:00\":{\"consumptionHigh\":0.226,\"consumptionLow\":0.0,\"consumptionTotal\":0.226,\"costsHigh\":0.083637741,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.071449411,\"status\":\"measured\"},\"2024-03-06T09:00:00+01:00\":{\"consumptionHigh\":0.058,\"consumptionLow\":0.0,\"consumptionTotal\":0.058,\"costsHigh\":0.021464553,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.009276223,\"status\":\"measured\"},\"2024-03-06T10:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0052053595,\"status\":\"measured\"},\"2024-03-06T11:00:00+01:00\":{\"consumptionHigh\":0.048,\"consumptionLow\":0.0,\"consumptionTotal\":0.048,\"costsHigh\":0.017763768,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.005575438,\"status\":\"measured\"},\"2024-03-06T12:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0052053595,\"status\":\"measured\"},\"2024-03-06T13:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0052053595,\"status\":\"measured\"},\"2024-03-06T14:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0052053595,\"status\":\"measured\"},\"2024-03-06T15:00:00+01:00\":{\"consumptionHigh\":0.048,\"consumptionLow\":0.0,\"consumptionTotal\":0.048,\"costsHigh\":0.017763768,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.005575438,\"status\":\"measured\"},\"2024-03-06T16:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0052053595,\"status\":\"measured\"},\"2024-03-06T17:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0052053595,\"status\":\"measured\"},\"2024-03-06T18:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0052053595,\"status\":\"measured\"},\"2024-03-06T19:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0052053595,\"status\":\"measured\"},\"2024-03-06T20:00:00+01:00\":{\"consumptionHigh\":0.438,\"consumptionLow\":0.0,\"consumptionTotal\":0.438,\"costsHigh\":0.162094383,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.149906053,\"status\":\"measured\"},\"2024-03-06T21:00:00+01:00\":{\"consumptionHigh\":0.295,\"consumptionLow\":0.0,\"consumptionTotal\":0.295,\"costsHigh\":0.1091731575,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0969848275,\"status\":\"measured\"},\"2024-03-06T22:00:00+01:00\":{\"consumptionHigh\":0.147,\"consumptionLow\":0.0,\"consumptionTotal\":0.147,\"costsHigh\":0.0544015395,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0422132095,\"status\":\"measured\"},\"2024-03-06T23:00:00+01:00\":{\"consumptionHigh\":0.039,\"consumptionLow\":0.0,\"consumptionTotal\":0.039,\"costsHigh\":0.0144330615,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":-0.01218833,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.01161075},{\"type\":\"netbeheerElektra\",\"value\":0.037720833333333335},{\"type\":\"belastingvermindering\",\"value\":-0.05940458333333333},{\"type\":\"btw\",\"value\":-0.00211533}],\"costsTotal\":0.0022447315,\"status\":\"measured\"}},\"total\":{\"consumptionHigh\":2.052,\"consumptionLow\":0.0,\"consumptionTotal\":2.052,\"costsHigh\":0.759401082,\"costsHighComponents\":[],\"costsLow\":0.0,\"costsLowComponents\":[],\"costsFixed\":-0.29251992,\"costsFixedComponents\":[{\"type\":\"vastrechtElektraVast\",\"value\":0.278658},{\"type\":\"netbeheerElektra\",\"value\":0.9053},{\"type\":\"belastingvermindering\",\"value\":-1.42571},{\"type\":\"btw\",\"value\":-0.05076792}],\"costsTotal\":0.466881162,\"status\":\"measured\"}},{\"productType\":\"gas\",\"unitType\":\"m3\",\"values\":{\"2024-03-06T00:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T01:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T02:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T03:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T04:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T05:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T06:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T07:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T08:00:00+01:00\":{\"consumptionHigh\":0.03,\"consumptionLow\":0.0,\"consumptionTotal\":0.03,\"costsHigh\":0.039466449,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.07063872108333333,\"status\":\"measured\"},\"2024-03-06T09:00:00+01:00\":{\"consumptionHigh\":0.103,\"consumptionLow\":0.0,\"consumptionTotal\":0.103,\"costsHigh\":0.1355014749,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.16667374698333334,\"status\":\"measured\"},\"2024-03-06T10:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T11:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T12:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T13:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T14:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T15:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T16:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T17:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T18:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T19:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T20:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T21:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T22:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"},\"2024-03-06T23:00:00+01:00\":{\"consumptionHigh\":0.0,\"consumptionLow\":0.0,\"consumptionTotal\":0.0,\"costsHigh\":0.0,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.031172272083333334,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.009270541666666667},{\"type\":\"netbeheerGas\",\"value\":0.01649166666666667},{\"type\":\"btw\",\"value\":0.00541006375}],\"costsTotal\":0.031172272083333334,\"status\":\"measured\"}},\"total\":{\"consumptionHigh\":0.133,\"consumptionLow\":0.0,\"consumptionTotal\":0.133,\"costsHigh\":0.1749679239,\"costsHighComponents\":[],\"costsLow\":0.0,\"costsLowComponents\":[],\"costsFixed\":0.74813453,\"costsFixedComponents\":[{\"type\":\"vastrechtGasVast\",\"value\":0.222493},{\"type\":\"netbeheerGas\",\"value\":0.3958},{\"type\":\"btw\",\"value\":0.12984153}],\"costsTotal\":0.9231024539,\"status\":\"measured\"}},{\"productType\":\"netConsumption\",\"unitType\":\"euro\",\"values\":{\"2024-03-06T00:00:00+01:00\":{\"consumptionHigh\":0.03,\"consumptionLow\":0.0,\"consumptionTotal\":0.03,\"costsHigh\":0.011102355,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.030086297083333335,\"status\":\"measured\"},\"2024-03-06T01:00:00+01:00\":{\"consumptionHigh\":0.051,\"consumptionLow\":0.0,\"consumptionTotal\":0.051,\"costsHigh\":0.0188740035,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.03785794558333333,\"status\":\"measured\"},\"2024-03-06T02:00:00+01:00\":{\"consumptionHigh\":0.052,\"consumptionLow\":0.0,\"consumptionTotal\":0.052,\"costsHigh\":0.019244082,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.03822802408333333,\"status\":\"measured\"},\"2024-03-06T03:00:00+01:00\":{\"consumptionHigh\":0.048,\"consumptionLow\":0.0,\"consumptionTotal\":0.048,\"costsHigh\":0.017763768,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036747710083333336,\"status\":\"measured\"},\"2024-03-06T04:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036377631583333334,\"status\":\"measured\"},\"2024-03-06T05:00:00+01:00\":{\"consumptionHigh\":0.048,\"consumptionLow\":0.0,\"consumptionTotal\":0.048,\"costsHigh\":0.017763768,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036747710083333336,\"status\":\"measured\"},\"2024-03-06T06:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036377631583333334,\"status\":\"measured\"},\"2024-03-06T07:00:00+01:00\":{\"consumptionHigh\":0.054,\"consumptionLow\":0.0,\"consumptionTotal\":0.054,\"costsHigh\":0.019984239,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.03896818108333333,\"status\":\"measured\"},\"2024-03-06T08:00:00+01:00\":{\"consumptionHigh\":0.226,\"consumptionLow\":0.0,\"consumptionTotal\":0.226,\"costsHigh\":0.12310419,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.14208813208333335,\"status\":\"measured\"},\"2024-03-06T09:00:00+01:00\":{\"consumptionHigh\":0.058,\"consumptionLow\":0.0,\"consumptionTotal\":0.058,\"costsHigh\":0.1569660279,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.17594996998333334,\"status\":\"measured\"},\"2024-03-06T10:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036377631583333334,\"status\":\"measured\"},\"2024-03-06T11:00:00+01:00\":{\"consumptionHigh\":0.048,\"consumptionLow\":0.0,\"consumptionTotal\":0.048,\"costsHigh\":0.017763768,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036747710083333336,\"status\":\"measured\"},\"2024-03-06T12:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036377631583333334,\"status\":\"measured\"},\"2024-03-06T13:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036377631583333334,\"status\":\"measured\"},\"2024-03-06T14:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036377631583333334,\"status\":\"measured\"},\"2024-03-06T15:00:00+01:00\":{\"consumptionHigh\":0.048,\"consumptionLow\":0.0,\"consumptionTotal\":0.048,\"costsHigh\":0.017763768,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036747710083333336,\"status\":\"measured\"},\"2024-03-06T16:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036377631583333334,\"status\":\"measured\"},\"2024-03-06T17:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036377631583333334,\"status\":\"measured\"},\"2024-03-06T18:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036377631583333334,\"status\":\"measured\"},\"2024-03-06T19:00:00+01:00\":{\"consumptionHigh\":0.047,\"consumptionLow\":0.0,\"consumptionTotal\":0.047,\"costsHigh\":0.0173936895,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.036377631583333334,\"status\":\"measured\"},\"2024-03-06T20:00:00+01:00\":{\"consumptionHigh\":0.438,\"consumptionLow\":0.0,\"consumptionTotal\":0.438,\"costsHigh\":0.162094383,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.18107832508333332,\"status\":\"measured\"},\"2024-03-06T21:00:00+01:00\":{\"consumptionHigh\":0.295,\"consumptionLow\":0.0,\"consumptionTotal\":0.295,\"costsHigh\":0.1091731575,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.12815709958333332,\"status\":\"measured\"},\"2024-03-06T22:00:00+01:00\":{\"consumptionHigh\":0.147,\"consumptionLow\":0.0,\"consumptionTotal\":0.147,\"costsHigh\":0.0544015395,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.07338548158333333,\"status\":\"measured\"},\"2024-03-06T23:00:00+01:00\":{\"consumptionHigh\":0.039,\"consumptionLow\":0.0,\"consumptionTotal\":0.039,\"costsHigh\":0.0144330615,\"costsHighComponents\":null,\"costsLow\":0.0,\"costsLowComponents\":null,\"costsFixed\":0.018983942083333333,\"costsFixedComponents\":null,\"costsTotal\":0.033417003583333334,\"status\":\"measured\"}},\"total\":{\"consumptionHigh\":2.052,\"consumptionLow\":0.0,\"consumptionTotal\":2.052,\"costsHigh\":0.9343690059,\"costsHighComponents\":[],\"costsLow\":0.0,\"costsLowComponents\":[],\"costsFixed\":0.45561461,\"costsFixedComponents\":[],\"costsTotal\":1.3899836159,\"status\":\"measured\"}}]}\r\n";

           /*
{"interval":"hour","start":"2024-03-06T00:00:00Z","end":"2024-03-07T00:00:00Z","entries":[{"productType":"electricity","unitType":"kWh","values":{"2024-03-06T00:00:00+01:00":{"consumptionHigh":0.03,"consumptionLow":0.0,"consumptionTotal":0.03,"costsHigh":0.011102355,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":-0.001085975,"status":"measured"},"2024-03-06T01:00:00+01:00":{"consumptionHigh":0.051,"consumptionLow":0.0,"consumptionTotal":0.051,"costsHigh":0.0188740035,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0066856735,"status":"measured"},"2024-03-06T02:00:00+01:00":{"consumptionHigh":0.052,"consumptionLow":0.0,"consumptionTotal":0.052,"costsHigh":0.019244082,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.007055752,"status":"measured"},"2024-03-06T03:00:00+01:00":{"consumptionHigh":0.048,"consumptionLow":0.0,"consumptionTotal":0.048,"costsHigh":0.017763768,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.005575438,"status":"measured"},"2024-03-06T04:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0052053595,"status":"measured"},"2024-03-06T05:00:00+01:00":{"consumptionHigh":0.048,"consumptionLow":0.0,"consumptionTotal":0.048,"costsHigh":0.017763768,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.005575438,"status":"measured"},"2024-03-06T06:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0052053595,"status":"measured"},"2024-03-06T07:00:00+01:00":{"consumptionHigh":0.054,"consumptionLow":0.0,"consumptionTotal":0.054,"costsHigh":0.019984239,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.007795909,"status":"measured"},"2024-03-06T08:00:00+01:00":{"consumptionHigh":0.226,"consumptionLow":0.0,"consumptionTotal":0.226,"costsHigh":0.083637741,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.071449411,"status":"measured"},"2024-03-06T09:00:00+01:00":{"consumptionHigh":0.058,"consumptionLow":0.0,"consumptionTotal":0.058,"costsHigh":0.021464553,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.009276223,"status":"measured"},"2024-03-06T10:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0052053595,"status":"measured"},"2024-03-06T11:00:00+01:00":{"consumptionHigh":0.048,"consumptionLow":0.0,"consumptionTotal":0.048,"costsHigh":0.017763768,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.005575438,"status":"measured"},"2024-03-06T12:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0052053595,"status":"measured"},"2024-03-06T13:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0052053595,"status":"measured"},"2024-03-06T14:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0052053595,"status":"measured"},"2024-03-06T15:00:00+01:00":{"consumptionHigh":0.048,"consumptionLow":0.0,"consumptionTotal":0.048,"costsHigh":0.017763768,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.005575438,"status":"measured"},"2024-03-06T16:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0052053595,"status":"measured"},"2024-03-06T17:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0052053595,"status":"measured"},"2024-03-06T18:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0052053595,"status":"measured"},"2024-03-06T19:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0052053595,"status":"measured"},"2024-03-06T20:00:00+01:00":{"consumptionHigh":0.438,"consumptionLow":0.0,"consumptionTotal":0.438,"costsHigh":0.162094383,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.149906053,"status":"measured"},"2024-03-06T21:00:00+01:00":{"consumptionHigh":0.295,"consumptionLow":0.0,"consumptionTotal":0.295,"costsHigh":0.1091731575,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0969848275,"status":"measured"},"2024-03-06T22:00:00+01:00":{"consumptionHigh":0.147,"consumptionLow":0.0,"consumptionTotal":0.147,"costsHigh":0.0544015395,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0422132095,"status":"measured"},"2024-03-06T23:00:00+01:00":{"consumptionHigh":0.039,"consumptionLow":0.0,"consumptionTotal":0.039,"costsHigh":0.0144330615,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":-0.01218833,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.01161075},{"type":"netbeheerElektra","value":0.037720833333333335},{"type":"belastingvermindering","value":-0.05940458333333333},{"type":"btw","value":-0.00211533}],"costsTotal":0.0022447315,"status":"measured"}},"total":{"consumptionHigh":2.052,"consumptionLow":0.0,"consumptionTotal":2.052,"costsHigh":0.759401082,"costsHighComponents":[],"costsLow":0.0,"costsLowComponents":[],"costsFixed":-0.29251992,"costsFixedComponents":[{"type":"vastrechtElektraVast","value":0.278658},{"type":"netbeheerElektra","value":0.9053},{"type":"belastingvermindering","value":-1.42571},{"type":"btw","value":-0.05076792}],"costsTotal":0.466881162,"status":"measured"}},{"productType":"gas","unitType":"m3","values":{"2024-03-06T00:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T01:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T02:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T03:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T04:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T05:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T06:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T07:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T08:00:00+01:00":{"consumptionHigh":0.03,"consumptionLow":0.0,"consumptionTotal":0.03,"costsHigh":0.039466449,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.07063872108333333,"status":"measured"},"2024-03-06T09:00:00+01:00":{"consumptionHigh":0.103,"consumptionLow":0.0,"consumptionTotal":0.103,"costsHigh":0.1355014749,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.16667374698333334,"status":"measured"},"2024-03-06T10:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T11:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T12:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T13:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T14:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T15:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T16:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T17:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T18:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T19:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T20:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T21:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T22:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"},"2024-03-06T23:00:00+01:00":{"consumptionHigh":0.0,"consumptionLow":0.0,"consumptionTotal":0.0,"costsHigh":0.0,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.031172272083333334,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.009270541666666667},{"type":"netbeheerGas","value":0.01649166666666667},{"type":"btw","value":0.00541006375}],"costsTotal":0.031172272083333334,"status":"measured"}},"total":{"consumptionHigh":0.133,"consumptionLow":0.0,"consumptionTotal":0.133,"costsHigh":0.1749679239,"costsHighComponents":[],"costsLow":0.0,"costsLowComponents":[],"costsFixed":0.74813453,"costsFixedComponents":[{"type":"vastrechtGasVast","value":0.222493},{"type":"netbeheerGas","value":0.3958},{"type":"btw","value":0.12984153}],"costsTotal":0.9231024539,"status":"measured"}},{"productType":"netConsumption","unitType":"euro","values":{"2024-03-06T00:00:00+01:00":{"consumptionHigh":0.03,"consumptionLow":0.0,"consumptionTotal":0.03,"costsHigh":0.011102355,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.030086297083333335,"status":"measured"},"2024-03-06T01:00:00+01:00":{"consumptionHigh":0.051,"consumptionLow":0.0,"consumptionTotal":0.051,"costsHigh":0.0188740035,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.03785794558333333,"status":"measured"},"2024-03-06T02:00:00+01:00":{"consumptionHigh":0.052,"consumptionLow":0.0,"consumptionTotal":0.052,"costsHigh":0.019244082,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.03822802408333333,"status":"measured"},"2024-03-06T03:00:00+01:00":{"consumptionHigh":0.048,"consumptionLow":0.0,"consumptionTotal":0.048,"costsHigh":0.017763768,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036747710083333336,"status":"measured"},"2024-03-06T04:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036377631583333334,"status":"measured"},"2024-03-06T05:00:00+01:00":{"consumptionHigh":0.048,"consumptionLow":0.0,"consumptionTotal":0.048,"costsHigh":0.017763768,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036747710083333336,"status":"measured"},"2024-03-06T06:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036377631583333334,"status":"measured"},"2024-03-06T07:00:00+01:00":{"consumptionHigh":0.054,"consumptionLow":0.0,"consumptionTotal":0.054,"costsHigh":0.019984239,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.03896818108333333,"status":"measured"},"2024-03-06T08:00:00+01:00":{"consumptionHigh":0.226,"consumptionLow":0.0,"consumptionTotal":0.226,"costsHigh":0.12310419,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.14208813208333335,"status":"measured"},"2024-03-06T09:00:00+01:00":{"consumptionHigh":0.058,"consumptionLow":0.0,"consumptionTotal":0.058,"costsHigh":0.1569660279,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.17594996998333334,"status":"measured"},"2024-03-06T10:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036377631583333334,"status":"measured"},"2024-03-06T11:00:00+01:00":{"consumptionHigh":0.048,"consumptionLow":0.0,"consumptionTotal":0.048,"costsHigh":0.017763768,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036747710083333336,"status":"measured"},"2024-03-06T12:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036377631583333334,"status":"measured"},"2024-03-06T13:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036377631583333334,"status":"measured"},"2024-03-06T14:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036377631583333334,"status":"measured"},"2024-03-06T15:00:00+01:00":{"consumptionHigh":0.048,"consumptionLow":0.0,"consumptionTotal":0.048,"costsHigh":0.017763768,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036747710083333336,"status":"measured"},"2024-03-06T16:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036377631583333334,"status":"measured"},"2024-03-06T17:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036377631583333334,"status":"measured"},"2024-03-06T18:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036377631583333334,"status":"measured"},"2024-03-06T19:00:00+01:00":{"consumptionHigh":0.047,"consumptionLow":0.0,"consumptionTotal":0.047,"costsHigh":0.0173936895,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.036377631583333334,"status":"measured"},"2024-03-06T20:00:00+01:00":{"consumptionHigh":0.438,"consumptionLow":0.0,"consumptionTotal":0.438,"costsHigh":0.162094383,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.18107832508333332,"status":"measured"},"2024-03-06T21:00:00+01:00":{"consumptionHigh":0.295,"consumptionLow":0.0,"consumptionTotal":0.295,"costsHigh":0.1091731575,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.12815709958333332,"status":"measured"},"2024-03-06T22:00:00+01:00":{"consumptionHigh":0.147,"consumptionLow":0.0,"consumptionTotal":0.147,"costsHigh":0.0544015395,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.07338548158333333,"status":"measured"},"2024-03-06T23:00:00+01:00":{"consumptionHigh":0.039,"consumptionLow":0.0,"consumptionTotal":0.039,"costsHigh":0.0144330615,"costsHighComponents":null,"costsLow":0.0,"costsLowComponents":null,"costsFixed":0.018983942083333333,"costsFixedComponents":null,"costsTotal":0.033417003583333334,"status":"measured"}},"total":{"consumptionHigh":2.052,"consumptionLow":0.0,"consumptionTotal":2.052,"costsHigh":0.9343690059,"costsHighComponents":[],"costsLow":0.0,"costsLowComponents":[],"costsFixed":0.45561461,"costsFixedComponents":[],"costsTotal":1.3899836159,"status":"measured"}}]}
             */
            return JsonSerializer.Deserialize<GreenchoiceConsumptionData>(data);
        }

        struct CustomerPreferences
        {
            public string accountId { get; set; }

            public struct CustomerData
            {
                public ulong customerNumber { get; set; }
                public ulong agreementId { get; set; }
            }

            public CustomerData subject { get; set; }
        }

        public struct MeterReadings
        {
            public struct ProductType
            {
                public enum ProductTypeEnum
                {
                    Stroom, // kWh
                    Gas // m3
                }

                public string productType { get; set; }

                public struct MonthData
                {
                    public uint month { get; set; }

                    public struct Reading
                    {
                        public DateTimeOffset readingDate { get; set; }
                        public float? normalConsumption { get; set; }
                        public float? offPeakConsumption { get; set; }
                        public float? gas { get; set; }

                    }
                    public List<Reading> readings { get; set; }
                }

                public List<MonthData> months { get; set; }

            }

            public List<ProductType> productTypes { get; set; }

            public ProductType.MonthData.Reading GetReading(DateTime date, ProductType.ProductTypeEnum type)
            {
                var strT = type.ToString();
                return productTypes.FirstOrDefault(x => x.productType == strT).months
                    .FirstOrDefault(x => x.month == date.Month).readings
                    .FirstOrDefault(x => x.readingDate.Date == date.Date);
            }
        }


        public async Task<MeterReadings> FetchMeterReadings(DateTime date)
        {
            // https://mijn.greenchoice.nl/api/v2/Preferences // Returns {"accountId":"XXXX","subject":{"customerNumber":XXX,"contractId":XXXX}}
            // https://mijn.greenchoice.nl/api/v2/MeterReadings/2024/{customerNumber}/{contractId}
            // https://mijn.greenchoice.nl/api/v2/customers/{customerNumber}/agreements/{contractId}/meter-readings/{date.Year}

            var prefs = JsonSerializer.Deserialize<CustomerPreferences>(await JsonGet(new Uri("https://mijn.greenchoice.nl/api/v2/Preferences")));
            var readings = JsonSerializer.Deserialize<MeterReadings>(await JsonGet(new Uri($"https://mijn.greenchoice.nl/api/v2/customers/{prefs.subject.customerNumber}/agreements/{prefs.subject.agreementId}/meter-readings/{date.Year}")));
            return readings;
        }


    }
}
